2025-07-23 14:07:50,742 - INFO - Opened environment URL: https://www.fattal.co.il/
2025-07-23 14:07:50,747 - INFO - Starting test: CLUB user hotel search and booking flow (mobile)
2025-07-23 14:07:50,747 - INFO - Opening personal zone (mobile login)...
2025-07-23 14:07:51,298 - INFO - Login menu opened via JavaScript interaction.
2025-07-23 14:07:51,298 - INFO - Trying to click 'כניסה באמצעות ת.ז וסיסמה' footer button...
2025-07-23 14:07:52,676 - INFO - ✅ Clicked 'כניסה באמצעות ת.ז וסיסמה' footer button successfully.
2025-07-23 14:07:53,393 - INFO - Clicking login button (mobile)...
2025-07-23 14:07:53,577 - INFO - Login button clicked.
2025-07-23 14:07:53,577 - INFO - Checking for post-login popup...
2025-07-23 14:07:55,536 - INFO - ✅ Post-login popup closed.
2025-07-23 14:07:55,536 - INFO - Logged in successfully.
2025-07-23 14:08:05,595 - INFO - WAR popup ID button not found, trying class selector...
2025-07-23 14:08:05,619 - INFO - WAR popup closed via class selector (u-close-button).
2025-07-23 14:08:05,620 - INFO - Searching for hotel input container (mobile)...
2025-07-23 14:08:05,669 - INFO - ✅ Clicked mobile hotel search input container.
2025-07-23 14:08:07,430 - INFO - ✅ Typed city name in mobile: לאונרדו נגב, באר שבע
2025-07-23 14:08:07,590 - INFO - Clicked first suggested hotel from list.
2025-07-23 14:08:07,746 - INFO - Opened mobile calendar (date picker).
2025-07-23 14:08:07,746 - INFO - Scrolling and selecting date range (real clicks)...
2025-07-23 14:08:09,786 - INFO - Attempting to select: 8 באוקטובר 2025 to 11 באוקטובר 2025 (3 לילות)
2025-07-23 14:08:12,818 - INFO - Calendar still open after selection – continuing.
2025-07-23 14:08:13,334 - INFO - Selected check-in: 8 באוקטובר 2025 → check-out: 11 באוקטובר 2025
2025-07-23 14:08:13,334 - INFO - Confirmed calendar selection.
2025-07-23 14:08:13,340 - INFO - Room modal already open — skip clicking.
2025-07-23 14:08:13,340 - INFO - Room modal already open — did not click again.
2025-07-23 14:08:13,340 - INFO - Adjusting room occupants...
2025-07-23 14:08:13,345 - INFO - Room modal confirmed present.
2025-07-23 14:08:13,345 - INFO - Setting adults to 2...
2025-07-23 14:08:13,361 - INFO - Adults set to: 2
2025-07-23 14:08:13,361 - INFO - Setting children to 0...
2025-07-23 14:08:13,379 - INFO - Children set to: 0
2025-07-23 14:08:13,379 - INFO - Setting infants to 0...
2025-07-23 14:08:13,395 - INFO - Infants set to: 0
2025-07-23 14:08:13,395 - INFO - Room occupant adjustment completed.
2025-07-23 14:08:13,395 - INFO - Searching for 'המשך' room continue button...
2025-07-23 14:08:13,398 - INFO - Room modal is visible and ready.
2025-07-23 14:08:13,813 - INFO - Clicked room continue button (native click).
2025-07-23 14:08:13,813 - INFO - Attempting to click main 'חפש חופשה' search button...
2025-07-23 14:08:18,854 - WARNING - Room modal may still be open — click might be blocked.
2025-07-23 14:08:18,863 - INFO - Found button with text: 'חפש חופשה'
2025-07-23 14:08:19,370 - INFO - Clicked search button (JS click).
2025-07-23 14:08:19,370 - INFO - [REGIONAL] מחפש כפתור 'הצג מחירים'...
2025-07-23 14:08:23,192 - INFO - נלחץ כפתור 'הצג מחירים' בהצלחה.
2025-07-23 14:08:23,286 - INFO - 📸 Screenshot 'room_selection' saved at: C:\Users\chene\PycharmProjects\FattalAUTO\Fattal_Tests\Screenshots\room_selection_2025-07-23_14-08-23.png
2025-07-23 14:08:23,286 - INFO - [REGIONAL] Trying to click 'להזמנת חדר' from regional price container...
2025-07-23 14:08:23,404 - INFO - [REGIONAL] Clicked 'להזמנת חדר' successfully.
2025-07-23 14:08:23,404 - INFO - 🕐 Waiting for personal details form (mobile)...
2025-07-23 14:08:24,605 - INFO - ✅ Email input is visible.
2025-07-23 14:08:24,692 - INFO - 📸 Screenshot 'payment_stage' saved at: C:\Users\chene\PycharmProjects\FattalAUTO\Fattal_Tests\Screenshots\payment_stage_2025-07-23_14-08-24.png
2025-07-23 14:08:24,692 - INFO - Clicking 'User Agreement' checkbox...
2025-07-23 14:08:24,728 - INFO - Clicked 'User Agreement' checkbox.
2025-07-23 14:08:39,730 - INFO - Using credit card details from config.json
2025-07-23 14:08:40,008 - INFO - Credit card details from config applied successfully
2025-07-23 14:08:40,010 - INFO -  Trying to click the payment submit button inside iframe...
2025-07-23 14:08:41,047 - INFO -  Payment submit button clicked successfully via JS.
2025-07-23 14:08:41,049 - INFO - 🔙 Switched back to main content after payment submission.
2025-07-23 14:08:41,049 - INFO - Waiting for mobile confirmation page to load...
2025-07-23 14:09:01,732 - INFO - Screenshot saved at: C:\Users\chene\PycharmProjects\FattalAUTO\Fattal_Tests\Fattal_Tests\Screenshots\confirmation_FAIL_2025-07-23_14-09-01.png
2025-07-23 14:09:01,732 - ERROR - ❌ Failed to extract confirmation (mobile): Message: 
Stacktrace:
	GetHandleVerifier [0x0x7ff64df0e935+77845]
	GetHandleVerifier [0x0x7ff64df0e990+77936]
	(No symbol) [0x0x7ff64dcc9cda]
	(No symbol) [0x0x7ff64dd206aa]
	(No symbol) [0x0x7ff64dd2095c]
	(No symbol) [0x0x7ff64dd73d07]
	(No symbol) [0x0x7ff64dd4890f]
	(No symbol) [0x0x7ff64dd70b07]
	(No symbol) [0x0x7ff64dd486a3]
	(No symbol) [0x0x7ff64dd11791]
	(No symbol) [0x0x7ff64dd12523]
	GetHandleVerifier [0x0x7ff64e1e684d+3059501]
	GetHandleVerifier [0x0x7ff64e1e0c0d+3035885]
	GetHandleVerifier [0x0x7ff64e200400+3164896]
	GetHandleVerifier [0x0x7ff64df28c3e+185118]
	GetHandleVerifier [0x0x7ff64df3054f+216111]
	GetHandleVerifier [0x0x7ff64df172e4+113092]
	GetHandleVerifier [0x0x7ff64df17499+113529]
	GetHandleVerifier [0x0x7ff64defe298+10616]
	BaseThreadInitThunk [0x0x7ff846a7e8d7+23]
	RtlUserThreadStart [0x0x7ff8481fc34c+44]

2025-07-23 14:09:01,733 - ERROR - Soft Assertion Failed: Booking failed — no order number found.
2025-07-23 14:09:01,733 - ERROR - Soft assertions encountered:
Booking failed — no order number found.
2025-07-23 14:09:04,923 - INFO -  Screenshot anchored with manual scroll saved at: C:\Users\chene\PycharmProjects\FattalAUTO\Fattal_Tests\Screenshots\confirmation_success_2025-07-23_14-09-01.png
